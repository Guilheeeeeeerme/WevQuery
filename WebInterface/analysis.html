<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Hypothesis Driven Interaction Behaviour Analysis</title>
  <link rel="icon" type="image/png" href="./res/WevQueryLogo.png" />
  <!-- Bootstrap -->
  <link href="./bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./analysis.css">
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="./jquery-ui-1.12.1/jquery-ui.css">
  <script src="./jquery-ui-1.12.1/external/jquery/jquery.js"></script>
  <!-- WARNING!!! The order of the following two JavaScripts will affect the icons used in the interface (the last one will have priority)-->
  <script src="./jquery-ui-1.12.1/jquery-ui.min.js"></script>
  <script src="./bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
  <!-- tag selection script-->
  <script src="./chosen_v1.6.2/chosen.jquery.js"></script>
  <link rel="stylesheet" href="./chosen_v1.6.2/chosen.css">
  <!-- Xml validation by http://syssgx.github.io/xml.js/ -->
  <script type="text/javascript" src="./tablesorter/jquery.tablesorter.js"></script>

  <script src="./d3/d3.v3.js"></script>
  <script src="./nvd3/nv.d3.js"></script>
  <script src="./spin/spin.js"></script>
  <link rel="stylesheet" href="./nvd3/nv.d3.css">

  <link href="./bootstrap-toggle/bootstrap-toggle.css" rel="stylesheet">
  <script src="./bootstrap-toggle/bootstrap-toggle.js"></script>


  <!-- The event creation and interaction logic is stored in a different file -->
  <script src="./genericFunctions.js"></script>
  <script src="./analysis.js"></script>
  <script src="./stackedChart/stackedChart.js"></script>
  <link rel="stylesheet" href="./stackedChart/stackedChart.css">
  <!--NV3 versionof the sankeychart, not as good as the original d3
    <script src="./sankey/sankeyChart.js"></script>-->

  <script src="./sunburst/sunburst.js"></script>
  <link rel="stylesheet" href="./sunburst/sunburst.css">

  <script src="./sankey/sankey.js"></script>
  <script src="./sankey/sankeyDiagramCustom.js"></script>
  <link rel="stylesheet" href="./sankey/sankey.css">


  <!-- server.js code script start-->
  <!--socket.io import changed so it works in MOVING server, the following file was copied from  
    "node_modules/socket.io/node_modules/socket.io-client/dist"    -->
  <!--<script src="/socket.io/socket.io.js"></script>-->
  <script src="../socket.io/socket.io.js"></script>
  <script src="./connection.js"></script>
  <script src="./analysisConnection.js"></script>
  <!-- server.js code script end-->

  <script>
    $(function () {

      //Analysis panel listeners
      $("#updateTabGeneral").click(function () {
        analysis.refreshStackedChart();
      });
      $("#updateTabTransitions").click(function () {
        analysis.refreshSankey();
      });
      $("#updateSunburst").click(function () {
        analysis.refreshSunburst();
      });

      analysis.initialiseInterface();

    });
  </script>
</head>

<body>
  <div class="container parentContainer">
    <div class="row">
      <h2>Analysis panel</h2>
      <ul class="nav nav-tabs">
        <li class="active">
          <a data-toggle="tab" href="#tabGeneral">General View
          <i id="updateTabGeneral" class="glyphicon glyphicon-refresh"></i>
        </a>
        </li>
        <li>
          <a data-toggle="tab" href="#tabTransitions">Transition View
          <i id="updateTabTransitions" class="glyphicon glyphicon-refresh"></i>
        </a>
        </li>
        <li>
          <a data-toggle="tab" href="#tabSunburst">Sunburst View
          <i id="updateSunburst" class="glyphicon glyphicon-refresh"></i>
        </a>
        </li>
        <li><a data-toggle="tab" href="#tabDescrStat">Descriptive statistics</a></li>
        <li><a data-toggle="tab" href="#tabTemp">Temporal description</a></li>
      </ul>


      <div class="tab-content">

        <div id="tabGeneral" class="tab-pane fade in active">
          <h3> Number of occurrences of each sequence per URL</h3>
          <div id="generalGraphLoadingSpin">
            <p class="spinnerMessage">Loading general graph</p>
          </div>
          <svg id="generalGraph" width="960" height="500"></svg>

        </div>

        <div id="tabTransitions" class="tab-pane fade">
          <h3> Sankey diagram detailing the transitions between events for all sequences</h3>
          <div id="sankeyGraphLoadingSpin">
            <p class="spinnerMessage">Loading transitions</p>
          </div>
          <div id="sankeyGraph"></div>
          <!--<div id="sankey-chart-simple" class="nvd3"></div>
        <div id="sankey-chart-advanced" class="nvd3"></div>-->
        </div>
        <div id="tabSunburst" class="tab-pane fade">
          <div id="sequenceCountGraphLoadingSpin">
            <p class="spinnerMessage">Loading sunburst graph</p>
          </div>
          <div id="sequenceCountGraph">
            <div id="sunburstSequence"></div>
            <div id="sunburstChart">
              <div id="sunburstExplanation" style="visibility: hidden;">
                <span id="sunburstPercentage"></span><br/> of sequences begin with this subsequence
              </div>
            </div>
          </div>
          <div id="sunburstSidebar">
            <input type="checkbox" id="sunburstTogglelegend"> Legend<br/>
            <div id="sunburstLegend" style="visibility: hidden;"></div>
          </div>
        </div>

        <div id="tabDescrStat" class="tab-pane fade">
          <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div id="tabTemp" class="tab-pane fade">
          <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
        </div>
      </div>
    </div>
  </div>
</body>

</html>